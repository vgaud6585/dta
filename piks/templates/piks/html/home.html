<!DOCTYPE html>
{% load static %}
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>home</title>
    <link rel="stylesheet" href="{% static 'piks/css/style.css' %}" title="main" type="text/css" />
    
  </head>
  <body>
    <h1>This is Home Page {{nm}}</h1>
    <h2><a href="{% url 'home' %}">Home Page</a></h2>
    <h2><a href="admin/">Admin Page</a></h2>
    <div class="container">
    <h2>My Code Snippets</h2>
    
    {% for snippet in snippets %}
    <div class="card mt-3">
        <div class="card-body">
            <h5>{{ snippet.title }}</h5>
            <pre><code id="code-{{ snippet.id }}">{{ snippet.content }}</code></pre>
            
            <button class="btn btn-sm btn-info" onclick="copyCode('code-{{ snippet.id }}')">Copy Code</button>
            
            <a href="{% url 'edit' snippet.id %}" class="btn btn-sm btn-warning">Edit</a>
            <a href="{% url 'delete' snippet.id %}" class="btn btn-sm btn-danger">Delete</a>
        </div>
    </div>
    {% endfor %}
</div>

<script>
function copyCode(elementId) {
    // Code text ko select karna
    const codeText = document.getElementById(elementId).innerText;
    
    // Clipboard me copy karna
    navigator.clipboard.writeText(codeText).then(() => {
        alert("Code copied to clipboard!");
    }).catch(err => {
        console.error('Error copying text: ', err);
    });
}
</script>

    <script src="{% static 'piks/js/script.js' %}" type="text/javascript" charset="utf-8"></script>
  </body>
</html>
